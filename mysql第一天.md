mysql数据库

持久性的保存数据

MySQL和Redis的区别？？

```
mysql是关系型数据库，主要用于存放持久化数据，将数据存储在硬盘中，读取速度较慢。

redis是NOSQL，即非关系型数据库，也是缓存数据库，即将数据存储在缓存中，缓存的读取速度快，能够大大的提高运行效率，但是保存时间有限

2.mysql的运行机制

mysql作为持久化存储的关系型数据库，相对薄弱的地方在于每次请求访问数据库时，都存在着I/O操作，如果反复频繁的访问数据库。第一：会在反复链接数据库上花费大量时间，从而导致运行效率过慢；第二：反复的访问数据库也会导致数据库的负载过高，那么此时缓存的概念就衍生了出来。

3.缓存

缓存就是数据交换的缓冲区（cache），当浏览器执行请求时，首先会对在缓存中进行查找，如果存在，就获取；否则就访问数据库。

缓存的好处就是读取速度快

4.redis数据库

redis数据库就是一款缓存数据库，用于存储使用频繁的数据，这样减少访问数据库的次数，提高运行效率。

5.redis和mysql的区别总结

（1）类型上

从类型上来说，mysql是关系型数据库，redis是缓存数据库

（2）作用上

mysql用于持久化的存储数据到硬盘，功能强大，但是速度较慢

redis用于存储使用较为频繁的数据到缓存中，读取速度快

（3）需求上

mysql和redis因为需求的不同，一般都是配合使用。
```

初始数据库

mysql是一个开放源代码的数据库管理系统，他是有MySQL  AB公司开发，发布并支持。mysql是一个跨平台的开源关系数据库管理系统。广泛地应用在网络上的中小型公司



数据库是有一批数据构成的有序的集合。这些数据被存放在结构化的数据表里。数据表之间互相关联，放映了客观事物间的本职联系。数据库系统提供对数据的安全控制和完整性控制。



阿里已经换成去IOE化：I    IBM  O：oracle    E：emc

数据库大致划分：人工管理阶段、文件系统阶段、数据库系统阶段、高级数据库阶段

种类：层次数据库、网络式数据库和关系式数据库。不同种类的数据库按照不同的数据库结构来联系和组织。

特点：实现数据共享、减少数据冗余、采用特点的数据类型、具有较高的数据独立性、具有统一的数据控制功能。

## 表

在关系数据库中，数据库的表是一系列的二维数组的集合，用来储存数据和操作数据的逻辑结构，行被称为记录，是组织的单位；列被称为字段，每一个列表示纪录的一个属性，都有相应的



数据类型决定了数据在计算机中的储存格式，代表不同的信息类型。

常用的数据类型有

```
：整数数据类型、浮点数数据类型、精确小数
```



主键

```
（Primary key）用于唯一的标识表中的每一条数据。可以定义表中的一列或者多列为主键。主键列上不能有两行相同的值，也不能为空值（null）。
设置多列：可以把多个条件满足满足来达到区分
```



数据库系统由硬件系统和软件系统部分共同构成，硬件主要用于储存数据库中的数据，包括计算机/



数据库：用于储存数据的地方

数据库管理系统：用于管理数据库的软件

数据库应用程序：为了提高数据库系统的处理能力所使用的管理数据库的软件

## sql语言

sql-92  ANSI美国标准机构

分为四类：

```
数据定义语言  ：DDL（data definition language）:create（创建）、alter（修改）、drop（删除）针对数据库或表而言

数据操作语言：DML（data Manipulation language）:INSERT (写入)、updata（更新）、delete（删除）针对数据而言

数据查询语言：DQL(data query language):select(查看)  查看表中的数据

数据控制语言: DCL(data control language)：begin（开启事务）、grant（授权）、commit（提交事务）、revoke（收回权限）  对于用户或者功能的控制情况

```



```
create database sjk1223;
use sjk1223;
#创建表并为表中的每个字段设置
create table student(name varchar(30),sex char(2),high int,weight int,address varchar(50),primary key(name,sex,high,weight,address) );

insert into student values('zs','m','180','80','bjhd');
```



不同程度设计语言会有不同的数据库访问技术

```
ODBC：（open database connectivity） 开放数据库互联。技术为访问不同的sql数据库提供了一个共同的接口。

JDBC：（java data base connectivity）java数据库连接，用于java应用程序连接标准方法。

ADO.NET：是微软在.NET 框架下开发设计的一组用于 和数据源进行交互的 面向对象 类库。

PDO：（php data object） 为php访问数据定义了一个轻量级、一致性的接口。它提供了一个数据访问抽象层，
```





mysql是一个小型关系型数据库管理系统，与其他大型数据库管理系统例如oracle、等相比mysql规模小，功能有限，但是体积小、速度快、成本低，企鹅他提供的功能对稍微复杂的应用来说已经够用了



mysql 

社区版：官方不提供技术支持

企业版：它能以很高的性价比为企业提供数据仓库应用，

第一个为主版本号，第二个为发行级别，第三个次发行版本号，随每次发布版本递增。通常选择已经发行的最新版本。



## MySQL的优势：

```
1.速度快 ：相对于大型数据库来说
2.免费   ：
3.操作简单，使用容易
4.一致性强
5.接口丰富，当前所有的主流语言都可以和mysql进行沟通，拥有api接口
6.安全性和连续性  可以通过网络来连接数据库来进行操作
```



```mysql
#创建数据库
create database 数据库名

#使用数据库
use 数据库名

#常看当前mysql中的数据库名
show databases；
在mysql中默认使用（分号）作为结束符结束mysql命令，结束福还有\G（使用更直观的方式进行内容的查看，去调表结构的方式） \g(等同于分号) 

#删除数据库（数据库一旦被删除，在库中的所有标以及表中的数据都随着库的删除而删除）
drop Database  数据库名

```

## 土著数据库

```

| information_schema |：用于保存关于mysql所维护的所有数据库的信息，包含数据库名，库中的表明，表中的字段 ，数据类型等信息
| mysql              |:用于保存数据库中用户信息，权限、关键字等内容
| performance_schema |：用于收集服务器性能参数，5.5版本之后才拥有的数据库
| test |： 测试库，任何用户在该库中都有root权限，可以增删改查
```



```
存储引擎
属于mysql底层组件，通过储存引擎支持mysql的增删改查，不同的储存引擎拥有不同的功能，属于mysql的核心
show  engines\G   ###引擎查看
```



```
存储引擎就是MySQL存放数据的格式，不同的存储引擎有的支持全文索引，有的支持外键。
需要根据不同的环境选择适当的存储引擎进行使用。
Engine: MRG_MYISAM     存储引擎名字
     Support: YES			MySQL是否支持该种存储引擎
     Comment: Collection of identical MyISAM tables  MySQL对该引擎的描述
Transactions: NO			是否支持事务
          XA: NO			是否支持分布式事务
  Savepoints:				是否支持事务的保存点
```

在mysql中不允许出现相同名字的数据库

在库中不允许出现相同名字的表

在表中不允许出现相同名字的字段

在mysql中对于库名和表名有大小写区分，但是字段名没有大小写区别



## 存储引擎 

```
MyISAM（不适用使用与钱有关的场景）
1.mysql5.5版本之前的默认存储引擎（建表如果不指定引擎默认使用myisam）
在5.5版本之后使用innodb
2.myisam存储引擎读取速度快，占用资源少，不支持事物，不支持外键，支持全文索引
3.读写相互阻塞
4.只能缓存索引不能缓存数据
#####使用场景：
不需要事物的业务；适用于读数据较多的业务；并发较低的业务；
硬件资源较差的业务




InnoDB特点
（1）mysql5.5版本以后默认存储引擎
（2）支持外键、行级别锁定，支持事务，支持事务的提交、回滚和崩溃的回复，能处理大并发量数据，性能较高。
（3）具有较高缓存性能，能缓存索引，也能缓存数据。
（4）使用InnoDB会在数据目录下生成两个名为ib_logfile0和ib_logfile1的5m大小日志文件和一个10m大小名为ibdata1（存放了使用innoDB存储引擎的表的数据以及索引信息）的自动扩展数据文件

使用场景：
（1）需啊哟支持事务的业务（例如：银行转账）
（2）数据需要大量更新的场景。例如论坛等等
（3）数据一致性要求较高的业务。手机卡充值
 show variables like 'default_storage_engine';  #查看默认存储引擎
 show variables like ''   ##查看系统参数的命令

MEMORY特点
（1）使用内存来进行保存数据，未查询和引用提供快速访问
（2）支持hash和btree索引，不支持使用blob和text数据类型
（3）如果不需要继续使用memory表中的数据，直接将表清空或者删除数据的方式可以直接释放内存。
适用场景：
临时存放数据，数据量不大，不需要较高安全性，可以选择memory，mysql使用memory相当熟存放查询的中间结果，一般用于存放session。


```



##                              对于表的操作

首先表作为存放数据的基本单位，可以包含一个或多个字段，可以用于创建、删除或者进行修改。建表的过程相当于给字段设置属性的过程，也是对数据进行约束的过程。

创建表的语法

```mysql
create table 表名(

字段1 数据类型   完整性约束条件

字段2 数据类型   完整性约束条件

)
```

```
查看当前的库

show databases；

然后通过use 库名 来使用库

查看当前库有哪些表

show tables；


```



完整性约束条件是什么？

```
对字段进行限制，允许用户想字段中写入符合约束条件的数据，如果用户写入的数据不满足条件，则会写入失败
```

约束条件

```
primary key 表示该属性为该表的主键，用于唯一的标识数据
foreign key 表示该属性为该表的外键，是与之联系的某表的主键
NOT NULL  标识该表的属性不能为空
UNIQUE    表示该属性值唯一
default   给某个字段设置默认值
auto_increment   标识带有概述性的字段值自动增加
```



## 主键：

需要满足唯一且非空，用于唯一标识数据，可以给数据本身具有唯一特质的字段进行添加

1单字段主键（表中只有一个字段设置为主键）

create table test(id int primary key, name varchar(30), sex char(2) );

2在定义玩所有的咧之后设置主键

 create table test1(id int , name varchar(30), sex char(2), primary key(id ) );

3.多字段主键（将多个字段放置在一起作为一个主键primary）

primary key（字段1 字段2.....）





## 外键

用来建立表与表之间的联系的约束条件，通过字段建立连接，一旦建立外键会出现父子表概念，谁建立外键谁就是数据子表，被关联的另一个表被称为父表，一个外键只能有一个子表，但是父表可以有多个字表。

子表与附表相关联的的字段在写入数据时，父表中链接字段拥有的数据，，才能向子表中添加，否则添加失败，为了保证数据的完整性。一个表作为被关联的字段必须作为主键，至于要设置外键的字段是不是主键对于关联产生任何影响。

```mysql
[constraint  约束名] foreign （设置外键的字段1，字段2.。。） references  父表名 (父表的字段列)
```

create table example2(id int primary key,name varchar(30),address varchar(30));

create table example3(d_id int primary key,name varchar(30),brithday date,address varchar(30),constraint fk_5 foreign key(d_id) references example2(id));



## 建立外键的规则：

```
建立外键时，父表的主键列数据类型需要和外键一致
建立外键时，如果关联的父表为联合主键，需要从第一个字段开始关联
建立外键时，关联的父表的字段一定要是父表的主键
书写问题	
```

create

## 非空字段

```mysql
表示该属性的字段不能写入非空值

语法： 字段名  数据类型 not null
```



## 唯一性约束条件

```mysql 
表示设置唯一性约束条件不允许写入重复值

1语法： 字段名    数据类型   unique

2语法 ：[constraint   约束名]   unique  （定义唯一条件的字段）
```

```mysql
create table example8(id int unique ,name varchar(30) not null);

```

查看表结构

```mysql
desc   表名

  describe  表名

show  create  table 表名\G           # 查看信息详细
```



## 默认值

事先给某个字段设置默认值，当不想该字段写入数据时，mysql会自动将默认值填入到该字段中

语法：字段名  数据类型   default 默认值

```mysql

create table example10(id int primary key,name varchar(30) NOT NULL unique, class char(20) default 'sjk');

insert into example10(id ,name) values(1,'user1');

```

![1577244352739](image/mysql第一天/1577244352739.png)





## 自增

用于给写入的数据生成一个新的唯一id,一个表中只允许一个自增约束条件,建立自增的时候需要为字段类型为数值和带有自增条件的字段为唯一性质,否则添加失败.



auto_increment

语法:字段名     数据类型    auto_increment



作





























